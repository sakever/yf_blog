<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PostgreSQL 相关用法 | disgare 的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/yf_blog/blogger_icon.ico">
    <meta name="description" content="记录学习到的知识">
    <meta name="theme-color" content="#14204193">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <link rel="preload" href="/yf_blog/assets/css/0.styles.743290fa.css" as="style"><link rel="preload" href="/yf_blog/assets/js/app.c2664df0.js" as="script"><link rel="preload" href="/yf_blog/assets/js/3.86e8edc4.js" as="script"><link rel="preload" href="/yf_blog/assets/js/2.e5572c9a.js" as="script"><link rel="preload" href="/yf_blog/assets/js/187.0a545656.js" as="script"><link rel="prefetch" href="/yf_blog/assets/js/1.368c97ab.js"><link rel="prefetch" href="/yf_blog/assets/js/10.3d1375a6.js"><link rel="prefetch" href="/yf_blog/assets/js/100.b7642128.js"><link rel="prefetch" href="/yf_blog/assets/js/101.899738c0.js"><link rel="prefetch" href="/yf_blog/assets/js/102.78127cab.js"><link rel="prefetch" href="/yf_blog/assets/js/103.16ba564f.js"><link rel="prefetch" href="/yf_blog/assets/js/104.c488de73.js"><link rel="prefetch" href="/yf_blog/assets/js/105.aa98ed9d.js"><link rel="prefetch" href="/yf_blog/assets/js/106.1012a89f.js"><link rel="prefetch" href="/yf_blog/assets/js/107.ef6a7b33.js"><link rel="prefetch" href="/yf_blog/assets/js/108.4813cd20.js"><link rel="prefetch" href="/yf_blog/assets/js/109.c7ed47bc.js"><link rel="prefetch" href="/yf_blog/assets/js/11.a58d4534.js"><link rel="prefetch" href="/yf_blog/assets/js/110.87f33c8b.js"><link rel="prefetch" href="/yf_blog/assets/js/111.befc86f9.js"><link rel="prefetch" href="/yf_blog/assets/js/112.67f58a0e.js"><link rel="prefetch" href="/yf_blog/assets/js/113.edda7e70.js"><link rel="prefetch" href="/yf_blog/assets/js/114.1be86290.js"><link rel="prefetch" href="/yf_blog/assets/js/115.5e0e9141.js"><link rel="prefetch" href="/yf_blog/assets/js/116.37d2e14c.js"><link rel="prefetch" href="/yf_blog/assets/js/117.438e6a9e.js"><link rel="prefetch" href="/yf_blog/assets/js/118.11bbbe8d.js"><link rel="prefetch" href="/yf_blog/assets/js/119.734b9672.js"><link rel="prefetch" href="/yf_blog/assets/js/12.c82c7c16.js"><link rel="prefetch" href="/yf_blog/assets/js/120.924843c3.js"><link rel="prefetch" href="/yf_blog/assets/js/121.bebfbcf6.js"><link rel="prefetch" href="/yf_blog/assets/js/122.56cb7452.js"><link rel="prefetch" href="/yf_blog/assets/js/123.04f7ffa0.js"><link rel="prefetch" href="/yf_blog/assets/js/124.244eec6e.js"><link rel="prefetch" href="/yf_blog/assets/js/125.cdcf9c81.js"><link rel="prefetch" href="/yf_blog/assets/js/126.164b35ba.js"><link rel="prefetch" href="/yf_blog/assets/js/127.63dd2eeb.js"><link rel="prefetch" href="/yf_blog/assets/js/128.f0f8e91c.js"><link rel="prefetch" href="/yf_blog/assets/js/129.91557f78.js"><link rel="prefetch" href="/yf_blog/assets/js/13.ea6b5163.js"><link rel="prefetch" href="/yf_blog/assets/js/130.ce32e235.js"><link rel="prefetch" href="/yf_blog/assets/js/131.af2e82fe.js"><link rel="prefetch" href="/yf_blog/assets/js/132.26fd187f.js"><link rel="prefetch" href="/yf_blog/assets/js/133.6cb5a438.js"><link rel="prefetch" href="/yf_blog/assets/js/134.4abfc0bf.js"><link rel="prefetch" href="/yf_blog/assets/js/135.2b49e021.js"><link rel="prefetch" href="/yf_blog/assets/js/136.f469f6b5.js"><link rel="prefetch" href="/yf_blog/assets/js/137.ceed73b4.js"><link rel="prefetch" href="/yf_blog/assets/js/138.271c416d.js"><link rel="prefetch" href="/yf_blog/assets/js/139.2056089d.js"><link rel="prefetch" href="/yf_blog/assets/js/14.4770d6f2.js"><link rel="prefetch" href="/yf_blog/assets/js/140.8de13122.js"><link rel="prefetch" href="/yf_blog/assets/js/141.f78e8962.js"><link rel="prefetch" href="/yf_blog/assets/js/142.f73a0fa2.js"><link rel="prefetch" href="/yf_blog/assets/js/143.882b4063.js"><link rel="prefetch" href="/yf_blog/assets/js/144.f881562e.js"><link rel="prefetch" href="/yf_blog/assets/js/145.03eba404.js"><link rel="prefetch" href="/yf_blog/assets/js/146.9aad3dcc.js"><link rel="prefetch" href="/yf_blog/assets/js/147.dc3ff09e.js"><link rel="prefetch" href="/yf_blog/assets/js/148.366d75c8.js"><link rel="prefetch" href="/yf_blog/assets/js/149.2efe66aa.js"><link rel="prefetch" href="/yf_blog/assets/js/15.52c2bc6f.js"><link rel="prefetch" href="/yf_blog/assets/js/150.3b377c2b.js"><link rel="prefetch" href="/yf_blog/assets/js/151.413385c1.js"><link rel="prefetch" href="/yf_blog/assets/js/152.e70d78c3.js"><link rel="prefetch" href="/yf_blog/assets/js/153.551be761.js"><link rel="prefetch" href="/yf_blog/assets/js/154.0317a378.js"><link rel="prefetch" href="/yf_blog/assets/js/155.7ff27217.js"><link rel="prefetch" href="/yf_blog/assets/js/156.b7f38e59.js"><link rel="prefetch" href="/yf_blog/assets/js/157.25039927.js"><link rel="prefetch" href="/yf_blog/assets/js/158.09f7e30a.js"><link rel="prefetch" href="/yf_blog/assets/js/159.10ca0aa4.js"><link rel="prefetch" href="/yf_blog/assets/js/16.aa789364.js"><link rel="prefetch" href="/yf_blog/assets/js/160.4ebc41dc.js"><link rel="prefetch" href="/yf_blog/assets/js/161.483cde0e.js"><link rel="prefetch" href="/yf_blog/assets/js/162.7749294e.js"><link rel="prefetch" href="/yf_blog/assets/js/163.3e83498b.js"><link rel="prefetch" href="/yf_blog/assets/js/164.818d2650.js"><link rel="prefetch" href="/yf_blog/assets/js/165.a162d665.js"><link rel="prefetch" href="/yf_blog/assets/js/166.d409ec21.js"><link rel="prefetch" href="/yf_blog/assets/js/167.32ef94a5.js"><link rel="prefetch" href="/yf_blog/assets/js/168.e6e3e4e9.js"><link rel="prefetch" href="/yf_blog/assets/js/169.6f8765f7.js"><link rel="prefetch" href="/yf_blog/assets/js/17.05e8b595.js"><link rel="prefetch" href="/yf_blog/assets/js/170.4350c68b.js"><link rel="prefetch" href="/yf_blog/assets/js/171.c2bbc90a.js"><link rel="prefetch" href="/yf_blog/assets/js/172.84081d84.js"><link rel="prefetch" href="/yf_blog/assets/js/173.48358e53.js"><link rel="prefetch" href="/yf_blog/assets/js/174.699eb28c.js"><link rel="prefetch" href="/yf_blog/assets/js/175.ab712063.js"><link rel="prefetch" href="/yf_blog/assets/js/176.04c20349.js"><link rel="prefetch" href="/yf_blog/assets/js/177.d273249d.js"><link rel="prefetch" href="/yf_blog/assets/js/178.bbad8619.js"><link rel="prefetch" href="/yf_blog/assets/js/179.257e0442.js"><link rel="prefetch" href="/yf_blog/assets/js/18.ff40c92f.js"><link rel="prefetch" href="/yf_blog/assets/js/180.6a9f56b3.js"><link rel="prefetch" href="/yf_blog/assets/js/181.12e2ac2a.js"><link rel="prefetch" href="/yf_blog/assets/js/182.67170d8a.js"><link rel="prefetch" href="/yf_blog/assets/js/183.3d3c914f.js"><link rel="prefetch" href="/yf_blog/assets/js/184.432bf196.js"><link rel="prefetch" href="/yf_blog/assets/js/185.1890762b.js"><link rel="prefetch" href="/yf_blog/assets/js/186.1f259f0e.js"><link rel="prefetch" href="/yf_blog/assets/js/188.b3d9b661.js"><link rel="prefetch" href="/yf_blog/assets/js/189.46ba1281.js"><link rel="prefetch" href="/yf_blog/assets/js/19.ae59133e.js"><link rel="prefetch" href="/yf_blog/assets/js/190.d3f4d94b.js"><link rel="prefetch" href="/yf_blog/assets/js/191.010701a1.js"><link rel="prefetch" href="/yf_blog/assets/js/192.b24749b8.js"><link rel="prefetch" href="/yf_blog/assets/js/193.6c67ca52.js"><link rel="prefetch" href="/yf_blog/assets/js/194.f3581160.js"><link rel="prefetch" href="/yf_blog/assets/js/195.b18b33b8.js"><link rel="prefetch" href="/yf_blog/assets/js/196.220b87c1.js"><link rel="prefetch" href="/yf_blog/assets/js/197.128cb4eb.js"><link rel="prefetch" href="/yf_blog/assets/js/198.ac1acc5f.js"><link rel="prefetch" href="/yf_blog/assets/js/199.2d32e9e2.js"><link rel="prefetch" href="/yf_blog/assets/js/20.7b86335d.js"><link rel="prefetch" href="/yf_blog/assets/js/200.1dede80f.js"><link rel="prefetch" href="/yf_blog/assets/js/201.07352572.js"><link rel="prefetch" href="/yf_blog/assets/js/21.f3f5c621.js"><link rel="prefetch" href="/yf_blog/assets/js/22.e0a1f5a4.js"><link rel="prefetch" href="/yf_blog/assets/js/23.7eabb604.js"><link rel="prefetch" href="/yf_blog/assets/js/24.8a88487b.js"><link rel="prefetch" href="/yf_blog/assets/js/25.59e0b3d9.js"><link rel="prefetch" href="/yf_blog/assets/js/26.a620c3de.js"><link rel="prefetch" href="/yf_blog/assets/js/27.5ab2aa34.js"><link rel="prefetch" href="/yf_blog/assets/js/28.1d4aac9c.js"><link rel="prefetch" href="/yf_blog/assets/js/29.468a0343.js"><link rel="prefetch" href="/yf_blog/assets/js/30.2d61f6ce.js"><link rel="prefetch" href="/yf_blog/assets/js/31.1b04d40c.js"><link rel="prefetch" href="/yf_blog/assets/js/32.72792376.js"><link rel="prefetch" href="/yf_blog/assets/js/33.4d09633e.js"><link rel="prefetch" href="/yf_blog/assets/js/34.06cff91e.js"><link rel="prefetch" href="/yf_blog/assets/js/35.dbf9d27d.js"><link rel="prefetch" href="/yf_blog/assets/js/36.b4571a58.js"><link rel="prefetch" href="/yf_blog/assets/js/37.f102a4ac.js"><link rel="prefetch" href="/yf_blog/assets/js/38.5d4e5cc3.js"><link rel="prefetch" href="/yf_blog/assets/js/39.0b7885e3.js"><link rel="prefetch" href="/yf_blog/assets/js/4.631c4c1e.js"><link rel="prefetch" href="/yf_blog/assets/js/40.814583ed.js"><link rel="prefetch" href="/yf_blog/assets/js/41.8313ff7d.js"><link rel="prefetch" href="/yf_blog/assets/js/42.edb19481.js"><link rel="prefetch" href="/yf_blog/assets/js/43.ab2058fc.js"><link rel="prefetch" href="/yf_blog/assets/js/44.1a537946.js"><link rel="prefetch" href="/yf_blog/assets/js/45.ada8184c.js"><link rel="prefetch" href="/yf_blog/assets/js/46.4032b0a2.js"><link rel="prefetch" href="/yf_blog/assets/js/47.ebbdbb43.js"><link rel="prefetch" href="/yf_blog/assets/js/48.05c3629a.js"><link rel="prefetch" href="/yf_blog/assets/js/49.954824b1.js"><link rel="prefetch" href="/yf_blog/assets/js/5.e4024f1e.js"><link rel="prefetch" href="/yf_blog/assets/js/50.2497b896.js"><link rel="prefetch" href="/yf_blog/assets/js/51.4b3a163f.js"><link rel="prefetch" href="/yf_blog/assets/js/52.8f236960.js"><link rel="prefetch" href="/yf_blog/assets/js/53.1e0cde65.js"><link rel="prefetch" href="/yf_blog/assets/js/54.abd05bc1.js"><link rel="prefetch" href="/yf_blog/assets/js/55.3102aa1d.js"><link rel="prefetch" href="/yf_blog/assets/js/56.65ad9590.js"><link rel="prefetch" href="/yf_blog/assets/js/57.a4f4a46c.js"><link rel="prefetch" href="/yf_blog/assets/js/58.396562a1.js"><link rel="prefetch" href="/yf_blog/assets/js/59.341d18df.js"><link rel="prefetch" href="/yf_blog/assets/js/6.e0040f07.js"><link rel="prefetch" href="/yf_blog/assets/js/60.e0432806.js"><link rel="prefetch" href="/yf_blog/assets/js/61.28ff28d7.js"><link rel="prefetch" href="/yf_blog/assets/js/62.305cf892.js"><link rel="prefetch" href="/yf_blog/assets/js/63.8826ac02.js"><link rel="prefetch" href="/yf_blog/assets/js/64.3f4494e9.js"><link rel="prefetch" href="/yf_blog/assets/js/65.bcfbf616.js"><link rel="prefetch" href="/yf_blog/assets/js/66.6168041d.js"><link rel="prefetch" href="/yf_blog/assets/js/67.582e8e38.js"><link rel="prefetch" href="/yf_blog/assets/js/68.c84dab19.js"><link rel="prefetch" href="/yf_blog/assets/js/69.3999e214.js"><link rel="prefetch" href="/yf_blog/assets/js/70.9dcd4e86.js"><link rel="prefetch" href="/yf_blog/assets/js/71.a6170ea7.js"><link rel="prefetch" href="/yf_blog/assets/js/72.fb666c35.js"><link rel="prefetch" href="/yf_blog/assets/js/73.be5da0a1.js"><link rel="prefetch" href="/yf_blog/assets/js/74.e0d01d4b.js"><link rel="prefetch" href="/yf_blog/assets/js/75.330d3a09.js"><link rel="prefetch" href="/yf_blog/assets/js/76.73237782.js"><link rel="prefetch" href="/yf_blog/assets/js/77.a9b3289f.js"><link rel="prefetch" href="/yf_blog/assets/js/78.b11e3d18.js"><link rel="prefetch" href="/yf_blog/assets/js/79.765be664.js"><link rel="prefetch" href="/yf_blog/assets/js/80.fc8502c6.js"><link rel="prefetch" href="/yf_blog/assets/js/81.3b701c29.js"><link rel="prefetch" href="/yf_blog/assets/js/82.701aaf73.js"><link rel="prefetch" href="/yf_blog/assets/js/83.9f5281e8.js"><link rel="prefetch" href="/yf_blog/assets/js/84.10678338.js"><link rel="prefetch" href="/yf_blog/assets/js/85.5735a218.js"><link rel="prefetch" href="/yf_blog/assets/js/86.7808de9b.js"><link rel="prefetch" href="/yf_blog/assets/js/87.5e24f0c3.js"><link rel="prefetch" href="/yf_blog/assets/js/88.f70a2a74.js"><link rel="prefetch" href="/yf_blog/assets/js/89.39852070.js"><link rel="prefetch" href="/yf_blog/assets/js/9.77d321d8.js"><link rel="prefetch" href="/yf_blog/assets/js/90.cae11652.js"><link rel="prefetch" href="/yf_blog/assets/js/91.e328fc76.js"><link rel="prefetch" href="/yf_blog/assets/js/92.6c98c7e9.js"><link rel="prefetch" href="/yf_blog/assets/js/93.f207e32d.js"><link rel="prefetch" href="/yf_blog/assets/js/94.436c1ea6.js"><link rel="prefetch" href="/yf_blog/assets/js/95.ebbae9f2.js"><link rel="prefetch" href="/yf_blog/assets/js/96.b28a61e6.js"><link rel="prefetch" href="/yf_blog/assets/js/97.67f3c5f6.js"><link rel="prefetch" href="/yf_blog/assets/js/98.aa1b0439.js"><link rel="prefetch" href="/yf_blog/assets/js/99.73635f4d.js"><link rel="prefetch" href="/yf_blog/assets/js/vendors~docsearch.6de48227.js">
    <link rel="stylesheet" href="/yf_blog/assets/css/0.styles.743290fa.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/yf_blog/" class="home-link router-link-active"><!----> <span class="site-name">disgare 的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/yf_blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/yf_blog/_posts/" class="nav-link">博客</a></div><div class="nav-item"><a href="/yf_blog/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/yf_blog/tags/" class="nav-link">标签</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/yf_blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/yf_blog/_posts/" class="nav-link">博客</a></div><div class="nav-item"><a href="/yf_blog/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/yf_blog/tags/" class="nav-link">标签</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>AI</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/e955e9/" class="sidebar-link">Agent 工程架构</a></li><li><a href="/yf_blog/pages/6f1149/" class="sidebar-link">LLM 相关内容</a></li><li><a href="/yf_blog/pages/701614/" class="sidebar-link">NLP 相关知识</a></li><li><a href="/yf_blog/pages/9886af/" class="sidebar-link">windows 下 ollama 迁移到 D 盘</a></li><li><a href="/yf_blog/pages/550b6a/" class="sidebar-link">如何编写 Prompt</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>架构设计</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/8ab4ed/" class="sidebar-link">DDD 架构学习笔记</a></li><li><a href="/yf_blog/pages/b78d39/" class="sidebar-link">Java 常用的规则引擎</a></li><li><a href="/yf_blog/pages/dbc528/" class="sidebar-link">MVC 架构学习笔记</a></li><li><a href="/yf_blog/pages/ee181e/" class="sidebar-link">三高问题下的系统优化</a></li><li><a href="/yf_blog/pages/678076/" class="sidebar-link">为什么要打日志？怎么打日志？打什么日志？</a></li><li><a href="/yf_blog/pages/a35d7e/" class="sidebar-link">从 ACID 到 BASE 事务处理的实现</a></li><li><a href="/yf_blog/pages/613ebd/" class="sidebar-link">代码整洁之道</a></li><li><a href="/yf_blog/pages/0b5fba/" class="sidebar-link">抽象方法与设计模式</a></li><li><a href="/yf_blog/pages/7cd7c1/" class="sidebar-link">分布式架构的观测</a></li><li><a href="/yf_blog/pages/0141e5/" class="sidebar-link">关于分布式系统 RPC 中高可用功能的实现</a></li><li><a href="/yf_blog/pages/3f325a/" class="sidebar-link">用低内存处理大量数据</a></li><li><a href="/yf_blog/pages/6c3518/" class="sidebar-link">数据库分库分表</a></li><li><a href="/yf_blog/pages/eccf41/" class="sidebar-link">设计模式——过滤器模式在 Spring 中的实践</a></li><li><a href="/yf_blog/pages/919677/" class="sidebar-link">状态模式</a></li><li><a href="/yf_blog/pages/68ffd1/" class="sidebar-link">设计模式——策略模式</a></li><li><a href="/yf_blog/pages/185efb/" class="sidebar-link">运维监控常见指标含义</a></li><li><a href="/yf_blog/pages/75efc3/" class="sidebar-link">集群间数据同步的目的</a></li><li><a href="/yf_blog/pages/65fbdf/" class="sidebar-link">权限系统设计</a></li><li><a href="/yf_blog/pages/9806ce/" class="sidebar-link">统一结果返回</a></li><li><a href="/yf_blog/pages/5a1bd1/" class="sidebar-link">参数校验与异常处理</a></li><li><a href="/yf_blog/pages/c2f838/" class="sidebar-link">资深研发进阶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>计算机基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/7fb985/" class="sidebar-link">Hex 和 Base64 编码</a></li><li><a href="/yf_blog/pages/369e2b/" class="sidebar-link">XML 的使用</a></li><li><a href="/yf_blog/pages/e0dafa/" class="sidebar-link">ffmpeg 的安装以及实现音频切分功能</a></li><li><a href="/yf_blog/pages/0b4606/" class="sidebar-link">操作系统 IO 相关知识</a></li><li><a href="/yf_blog/pages/506a5f/" class="sidebar-link">操作系统学习笔记</a></li><li><a href="/yf_blog/pages/a0774f/" class="sidebar-link">正则表达式相关概念</a></li><li><a href="/yf_blog/pages/dd4891/" class="sidebar-link">程序的机器级表示</a></li><li><a href="/yf_blog/pages/46e8db/" class="sidebar-link">音频文件基础</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/9c2ddc/" class="sidebar-link">动态规划算法学习笔记</a></li><li><a href="/yf_blog/pages/ce5240/" class="sidebar-link">基于比较的排序算法的最坏情况下的最优下界为什么是O(nlogn)</a></li><li><a href="/yf_blog/pages/2d730d/" class="sidebar-link">算法导论第一部分学习笔记</a></li><li><a href="/yf_blog/pages/255773/" class="sidebar-link">算法导论第二部分排序学习笔记</a></li><li><a href="/yf_blog/pages/8c57a1/" class="sidebar-link">集合与数据结构学习笔记</a></li><li><a href="/yf_blog/pages/0fe968/" class="sidebar-link">面试常见算法总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>开发工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/4e144e/" class="sidebar-link">IDEA 常用快捷键以及调试</a></li><li><a href="/yf_blog/pages/ffbf5b/" class="sidebar-link">IDEA 插件推荐</a></li><li><a href="/yf_blog/pages/e171f5/" class="sidebar-link">Shell 脚本</a></li><li><a href="/yf_blog/pages/efaff2/" class="sidebar-link">excel 关于 =vlookup 的用法</a></li><li><a href="/yf_blog/pages/826eb6/" class="sidebar-link">git 的学习以及使用</a></li><li><a href="/yf_blog/pages/42fb6e/" class="sidebar-link">如何画时序图、流程图、状态流转图</a></li><li><a href="/yf_blog/pages/c7b0d6/" class="sidebar-link">swagger 的使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/48bb0f/" class="sidebar-link">Dubbo 基础概念</a></li><li><a href="/yf_blog/pages/1aaad1/" class="sidebar-link">Gossip 协议</a></li><li><a href="/yf_blog/pages/78bd1e/" class="sidebar-link">Protobuf 通信协议</a></li><li><a href="/yf_blog/pages/7dbc29/" class="sidebar-link">Zookeeper 基础学习</a></li><li><a href="/yf_blog/pages/186300/" class="sidebar-link">nginx 学习笔记</a></li><li><a href="/yf_blog/pages/983537/" class="sidebar-link">分布式 id</a></li><li><a href="/yf_blog/pages/748e2f/" class="sidebar-link">分布式一致性算法</a></li><li><a href="/yf_blog/pages/9557c0/" class="sidebar-link">分布式缓存相关问题</a></li><li><a href="/yf_blog/pages/312346/" class="sidebar-link">分布式集群理论和分布式事务协议</a></li><li><a href="/yf_blog/pages/44dde6/" class="sidebar-link">初步了解 docker</a></li><li><a href="/yf_blog/pages/a802c5/" class="sidebar-link">访问远程服务</a></li><li><a href="/yf_blog/pages/1a74a9/" class="sidebar-link">详解 Spring Cloud</a></li><li><a href="/yf_blog/pages/766960/" class="sidebar-link">负载均衡 Load Balancing</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/9fb30d/" class="sidebar-link">GitHub Pages 部署教程</a></li><li><a href="/yf_blog/pages/f290f0/" class="sidebar-link">Vercel 部署教程</a></li><li><a href="/yf_blog/pages/3466b3/" class="sidebar-link">VuePress 博客搭建指南</a></li><li><a href="/yf_blog/pages/1a0550/" class="sidebar-link">vue-admin-template 简单使用</a></li><li><a href="/yf_blog/pages/ad0393/" class="sidebar-link">简单了解前端页面开发</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>金融</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/32fcaa/" class="sidebar-link">基础的金融知识</a></li><li><a href="/yf_blog/pages/208311/" class="sidebar-link">基金与股票</a></li><li><a href="/yf_blog/pages/4c25cb/" class="sidebar-link">聊聊价值投资</a></li><li><a href="/yf_blog/pages/45b6d2/" class="sidebar-link">股票技术面</a></li><li><a href="/yf_blog/pages/6eac39/" class="sidebar-link">股票技术面——盘口</a></li><li><a href="/yf_blog/pages/dc3567/" class="sidebar-link">股票技术面——量价关系</a></li><li><a href="/yf_blog/pages/e20328/" class="sidebar-link">韭菜的自我总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/c6c095/" class="sidebar-link">CompletableFuture 相关用法</a></li><li><a href="/yf_blog/pages/ecbee2/" class="sidebar-link">CompletableFuture 源码浅要阅读</a></li><li><a href="/yf_blog/pages/7b86e1/" class="sidebar-link">FutureTask 源码阅读</a></li><li><a href="/yf_blog/pages/44e926/" class="sidebar-link">Guava 常用 API</a></li><li><a href="/yf_blog/pages/39d9fa/" class="sidebar-link">Guava 源码阅读：Multimap 相关</a></li><li><a href="/yf_blog/pages/dd07b6/" class="sidebar-link">Jackson 的各种使用</a></li><li><a href="/yf_blog/pages/937eaf/" class="sidebar-link">Java Http 访问框架</a></li><li><a href="/yf_blog/pages/7c50ad/" class="sidebar-link">Java Stream 的使用</a></li><li><a href="/yf_blog/pages/6dd1f6/" class="sidebar-link">Java 中关于字符串处理的常用方法</a></li><li><a href="/yf_blog/pages/c3dbce/" class="sidebar-link">Java 中强、软、弱、虚引用</a></li><li><a href="/yf_blog/pages/d27aff/" class="sidebar-link">Java 图片文件上传下载处理</a></li><li><a href="/yf_blog/pages/963b88/" class="sidebar-link">Java 序列化</a></li><li><a href="/yf_blog/pages/34ed11/" class="sidebar-link">Java 异常</a></li><li><a href="/yf_blog/pages/225e11/" class="sidebar-link">Java 的 Excel 相关操作</a></li><li><a href="/yf_blog/pages/333ebd/" class="sidebar-link">Java 语法糖</a></li><li><a href="/yf_blog/pages/c222fe/" class="sidebar-link">Java8 新特性</a></li><li><a href="/yf_blog/pages/ab80e7/" class="sidebar-link">JAVA 枚举的基础和原理</a></li><li><a href="/yf_blog/pages/928c42/" class="sidebar-link">JAVA 注解小结</a></li><li><a href="/yf_blog/pages/d42f3e/" class="sidebar-link">Scanner 的各种用法</a></li><li><a href="/yf_blog/pages/e105fb/" class="sidebar-link">Servlet 学习笔记</a></li><li><a href="/yf_blog/pages/ac014f/" class="sidebar-link">String、StringBuffer、StringBuilder 学习笔记</a></li><li><a href="/yf_blog/pages/d72eb0/" class="sidebar-link">反射学习笔记</a></li><li><a href="/yf_blog/pages/ccb80e/" class="sidebar-link">如何使用 lambda 表达式实现排序</a></li><li><a href="/yf_blog/pages/68302b/" class="sidebar-link">对象之间的映射与转换</a></li><li><a href="/yf_blog/pages/2d0d5d/" class="sidebar-link">泛型相关概念</a></li><li><a href="/yf_blog/pages/880e93/" class="sidebar-link">java 基础知识</a></li><li><a href="/yf_blog/pages/40050a/" class="sidebar-link">java 的常见性能问题分析以及出现场景</a></li><li><a href="/yf_blog/pages/2ccf2b/" class="sidebar-link">netty 学习笔记</a></li><li><a href="/yf_blog/pages/d19589/" class="sidebar-link">关于 boolean 类型的坑</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JVM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/f1cb04/" class="sidebar-link">JVM 自动内存管理</a></li><li><a href="/yf_blog/pages/f31036/" class="sidebar-link">Linux 中 JVM 常用工具以及常见问题解决思路</a></li><li><a href="/yf_blog/pages/012606/" class="sidebar-link">虚拟机执行子系统</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Linux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/7e5fa8/" class="sidebar-link">Linux 常见命令</a></li><li><a href="/yf_blog/pages/4dc776/" class="sidebar-link">Linux 文件系统</a></li><li><a href="/yf_blog/pages/14921e/" class="sidebar-link">crontab 表达式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>中间件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/892168/" class="sidebar-link">ES 搜索引擎</a></li><li><a href="/yf_blog/pages/d62e26/" class="sidebar-link">Grape-RAG</a></li><li><a href="/yf_blog/pages/dccd21/" class="sidebar-link">Hadoop 基础原理</a></li><li><a href="/yf_blog/pages/96cb13/" class="sidebar-link">flink 提交流程</a></li><li><a href="/yf_blog/pages/6a77fa/" class="sidebar-link">关于定时任务原理</a></li><li><a href="/yf_blog/pages/28d66d/" class="sidebar-link">详解 kafka</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>多线程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/61e121/" class="sidebar-link">AQS 组件</a></li><li><a href="/yf_blog/pages/0ca189/" class="sidebar-link">ThreadLocal 原理以及使用</a></li><li><a href="/yf_blog/pages/e05bed/" class="sidebar-link">多线程基础学习笔记</a></li><li><a href="/yf_blog/pages/0f375d/" class="sidebar-link">如何手写单例</a></li><li><a href="/yf_blog/pages/94b067/" class="sidebar-link">深入理解 java 多线程安全</a></li><li><a href="/yf_blog/pages/762776/" class="sidebar-link">生产者消费者问题</a></li><li><a href="/yf_blog/pages/7ef428/" class="sidebar-link">简单了解并发集合</a></li><li><a href="/yf_blog/pages/a09837/" class="sidebar-link">线程池作用、用法以及原理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>网络</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/a166f1/" class="sidebar-link">CORS 跨域资源共享</a></li><li><a href="/yf_blog/pages/d84607/" class="sidebar-link">DNS、HTTP 与 HTTPS</a></li><li><a href="/yf_blog/pages/1d73ce/" class="sidebar-link">Server-Sent Events (SSE)</a></li><li><a href="/yf_blog/pages/300ef6/" class="sidebar-link">WebSocket 长连接</a></li><li><a href="/yf_blog/pages/d076a2/" class="sidebar-link">网络安全相关</a></li><li><a href="/yf_blog/pages/14de66/" class="sidebar-link">计算机网络学习笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>非关系型数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/b892d0/" class="sidebar-link">Redis 学习笔记</a></li><li><a href="/yf_blog/pages/324f01/" class="sidebar-link">Redis 数据结构、对象与数据库</a></li><li><a href="/yf_blog/pages/c1d375/" class="sidebar-link">Redis 集群</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/ec9ffb/" class="sidebar-link">程序员职场工作需要注意什么</a></li><li><a href="/yf_blog/pages/7daa13/" class="sidebar-link">梅花易数学习笔记</a></li><li><a href="/yf_blog/pages/b10173/" class="sidebar-link">观罗翔讲刑法随笔</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/392c9a/" class="sidebar-link">Python 基础语法</a></li><li><a href="/yf_blog/pages/19f4b1/" class="sidebar-link">Python 学习</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>问题记录</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/f010f0/" class="sidebar-link">提供可传递的易受攻击的依赖项</a></li><li><a href="/yf_blog/pages/031833/" class="sidebar-link">定时任务单线程消费 redis 中数据导致消费能力不足</a></li><li><a href="/yf_blog/pages/3b7cea/" class="sidebar-link">Liteflow 在 SpringBoot 启动时无法注入组件问题 couldn‘t find chain with the id[THEN(NodeComponent)]</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>关系型数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/9fd0c5/" class="sidebar-link">B+ 树的插入、删除和数据页分裂机制</a></li><li><a href="/yf_blog/pages/edd766/" class="sidebar-link">MySQL 事务与锁与 MVCC</a></li><li><a href="/yf_blog/pages/e03901/" class="sidebar-link">MySQL 的 binglog、redolog、undolog</a></li><li><a href="/yf_blog/pages/b52f55/" class="sidebar-link">MySQL 基本的特性</a></li><li><a href="/yf_blog/pages/e68c5c/" class="sidebar-link">MySQL 开发规范</a></li><li><a href="/yf_blog/pages/559733/" class="sidebar-link">MySQL 数据类型、字符集相关内容</a></li><li><a href="/yf_blog/pages/07f1e8/" class="sidebar-link">MySQL 索引与索引优化</a></li><li><a href="/yf_blog/pages/a7814c/" class="sidebar-link">MySQL 的记录存储结构、存储引擎与 Buffer Pool</a></li><li><a href="/yf_blog/pages/977f1d/" class="sidebar-link">PostgreSQL 更新数据时 HOT优化</a></li><li><a href="/yf_blog/pages/d3cea7/" aria-current="page" class="active sidebar-link">PostgreSQL 相关用法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/yf_blog/pages/d3cea7/#常见语法" class="sidebar-link">常见语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#numeric" class="sidebar-link">NUMERIC</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#serial" class="sidebar-link">SERIAL</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#limit" class="sidebar-link">LIMIT</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#with" class="sidebar-link">WITH</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#连接" class="sidebar-link">连接</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#union-联表" class="sidebar-link">UNION 联表</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#强制转换" class="sidebar-link">:: 强制转换</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#正则匹配" class="sidebar-link">正则匹配</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#on-conflict" class="sidebar-link">ON CONFLICT</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#建立索引" class="sidebar-link">建立索引</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#gin-索引原理" class="sidebar-link">gin 索引原理</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#pg-stat-activity-查询正在执行的语句和杀掉卡住的语句" class="sidebar-link">pgstatactivity 查询正在执行的语句和杀掉卡住的语句</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#设置东8区" class="sidebar-link">设置东8区</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/yf_blog/pages/d3cea7/#常见函数" class="sidebar-link">常见函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#to-char-日期转字符串" class="sidebar-link">to_char 日期转字符串</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#to-timestamp-字符串转日期" class="sidebar-link">to_timestamp 字符串转日期</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#date-part" class="sidebar-link">date_part</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#extract-epoch-year-from-timestamp" class="sidebar-link">extract (epoch | year... from timestamp)</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#string-agg" class="sidebar-link">string_agg</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/yf_blog/pages/d3cea7/#json-与-jsonb" class="sidebar-link">JSON 与 JSONB</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#查询操作符" class="sidebar-link">查询操作符</a></li><li class="sidebar-sub-header level4"><a href="/yf_blog/pages/d3cea7/#通过-json-的键获取-json-的值" class="sidebar-link">通过 json 的键获取 json 的值</a></li><li class="sidebar-sub-header level4"><a href="/yf_blog/pages/d3cea7/#获取指定路径上的对象" class="sidebar-link">#&gt; 获取指定路径上的对象</a></li><li class="sidebar-sub-header level4"><a href="/yf_blog/pages/d3cea7/#判断-json-中是否存在某个键" class="sidebar-link">？判断 json 中是否存在某个键</a></li><li class="sidebar-sub-header level4"><a href="/yf_blog/pages/d3cea7/#判断-json-中是否存在某个键值对" class="sidebar-link">@&gt; 判断 json 中是否存在某个键值对</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#修改操作符" class="sidebar-link">修改操作符</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header level4"><a href="/yf_blog/pages/d3cea7/#jsonb-array-elements-操作-json-数组" class="sidebar-link">jsonbarrayelements 操作 json 数组</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/yf_blog/pages/d3cea7/#hstore" class="sidebar-link">hstore</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#操作符" class="sidebar-link">操作符</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#增删改" class="sidebar-link">增删改</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/yf_blog/pages/d3cea7/#数组" class="sidebar-link">数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#操作符-2" class="sidebar-link">操作符</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#函数-2" class="sidebar-link">函数</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/yf_blog/pages/d3cea7/#ltree" class="sidebar-link">ltree</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#查询操作符-2" class="sidebar-link">查询操作符</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/yf_blog/pages/d3cea7/#性能分析" class="sidebar-link">性能分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#generate-series-生成数据" class="sidebar-link">generate_series 生成数据</a></li><li class="sidebar-sub-header level3"><a href="/yf_blog/pages/d3cea7/#explain-analyze" class="sidebar-link">explain analyze</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Spring 项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yf_blog/pages/d520d7/" class="sidebar-link">Lombok 的常用注解</a></li><li><a href="/yf_blog/pages/b38ecd/" class="sidebar-link">MyBatis 框架的使用</a></li><li><a href="/yf_blog/pages/88ea75/" class="sidebar-link">MyBatis 重要知识点总结</a></li><li><a href="/yf_blog/pages/3c62c6/" class="sidebar-link">MybatisPlus 的使用</a></li><li><a href="/yf_blog/pages/9bfe78/" class="sidebar-link">Spring IOC 的原理及源码</a></li><li><a href="/yf_blog/pages/2cbf04/" class="sidebar-link">Spring 事务相关</a></li><li><a href="/yf_blog/pages/79cf30/" class="sidebar-link">Spring 框架基础使用</a></li><li><a href="/yf_blog/pages/0fd146/" class="sidebar-link">Spring AOP 的使用和原理</a></li><li><a href="/yf_blog/pages/37613f/" class="sidebar-link">SpringBoot 基础使用</a></li><li><a href="/yf_blog/pages/237c7e/" class="sidebar-link">SpringBoot 的原理</a></li><li><a href="/yf_blog/pages/0419a8/" class="sidebar-link">SpringWeb 重要知识点</a></li><li><a href="/yf_blog/pages/b6014b/" class="sidebar-link">maven 小结</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><!----> <div class="info" data-v-06225672><!----> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-10-03</a></div> <div title="分类" class="date iconfont icon-wenjian" data-v-06225672><a href="/yf_blog/categories/?category=%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93" data-v-06225672>关系型数据库 </a></div></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">PostgreSQL 相关用法<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="常见语法"><a href="#常见语法" class="header-anchor">#</a> 常见语法</h2> <p>PG 大部分语法与 MySQL 一致，只有略微的区别。其中包含很多非常有用并且有趣的功能</p> <h3 id="numeric"><a href="#numeric" class="header-anchor">#</a> NUMERIC</h3> <p>NUMERIC 类型的语法：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token keyword">precision</span><span class="token punctuation">,</span> scale<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>precision 表示整个数据长度，scale 表示小数部分的长度。如： 1234.567 ，precision 为 7 ，scale 为 3</p> <p>NUMERIC 类型在小数点前面长度可达到 131,072 ，小数点后面长度可达到 16,383。scale 可以为 0 或正数，下面示例表示 scale 为 0：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token keyword">precision</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果 precision 和 scale 都忽略，则可以存储任何上面提及限制内的长度和精度</p> <p>我们可以使用，更精确的计算结果。浮点数存在精度问题，可能会出现计算误差，而使用 numeric(5,2) 可以保证计算结果的精度</p> <p>该类型在 java 中直接对应 BigDecimal 类型。在 PostgreSQL中 NUMERIC 和 DECIMAL 是等价的</p> <h3 id="serial"><a href="#serial" class="header-anchor">#</a> SERIAL</h3> <p>postgresql 序列号（SERIAL）类型包括 smallserial（smallint,short）,serial(int) 和 bigserial(bigint,long long int)，不管是 smallserial，serial 还是 bigserial，其范围都是(1,9223372036854775807)，但是序列号类型其实不是真正的类型，当声明一个字段为序列号类型时其实是创建了一个序列，INSERT 时如果没有给该字段赋值会默认获取对应序列的下一个值，因此我们常常用它来作为主键</p> <p>在创建表时输入这个值，事实上是为主键的默认值设置为 nextval，比如
<img src="https://i-blog.csdnimg.cn/blog_migrate/4ff1c349a55e807e492ba6989417acda.png" alt="在这里插入图片描述">
我们可以使用查询语句查出这个值，也可以手动修改它的默认值</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> nextval<span class="token punctuation">(</span><span class="token string">'crm_user_info_v_id_seq'</span>::regclass<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> sequence <span class="token keyword">if</span> <span class="token keyword">exists</span> crm_user_info_v_id_seq restart <span class="token keyword">with</span> <span class="token number">50</span> cache <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> setval<span class="token punctuation">(</span><span class="token string">'crm_allocation_model_id_seq'</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> crm_allocation_model<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="limit"><a href="#limit" class="header-anchor">#</a> LIMIT</h3> <p>带有 LIMIT 子句的 SELECT 语句的基本语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN
<span class="token keyword">FROM</span> table_name
<span class="token keyword">LIMIT</span> <span class="token number">10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下面是 LIMIT 子句与 OFFSET 子句一起使用时的语法，OFFSET 可以允许从一个特定的偏移开始提取记录：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN 
<span class="token keyword">FROM</span> table_name
<span class="token keyword">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword">no</span> <span class="token keyword">of</span> <span class="token keyword">rows</span><span class="token punctuation">]</span> <span class="token keyword">OFFSET</span> <span class="token punctuation">[</span><span class="token keyword">row</span> num<span class="token punctuation">]</span>

<span class="token comment">-- 从第三位开始提取 10 个记录</span>
<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN 
<span class="token keyword">FROM</span> table_name
<span class="token keyword">LIMIT</span> <span class="token number">10</span> <span class="token keyword">OFFSET</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>mysql 是在 limit 后跟两个数字，以表示每页多少数据以及偏移量</p> <h3 id="with"><a href="#with" class="header-anchor">#</a> WITH</h3> <p>pg 带有 with 语句，可以定义一个子查询，然后再其他的查询中复用这个子查询，比如</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">with</span> aaa <span class="token keyword">as</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> user_coupon<span class="token punctuation">)</span>
<span class="token keyword">select</span> user_name <span class="token keyword">from</span> aaa<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意 with 语句不要带分号</p> <h3 id="连接"><a href="#连接" class="header-anchor">#</a> 连接</h3> <p>PostgreSQL JOIN 子句用于把来自两个或多个表的行结合起来，基于这些表之间的共同字段</p> <p>在 PostgreSQL 中，JOIN 有五种连接类型：</p> <p>CROSS JOIN ：交叉连接
INNER JOIN：内连接
LEFT OUTER JOIN：左外连接
RIGHT OUTER JOIN：右外连接
FULL OUTER JOIN：全外连接</p> <p>pg 的连接做的比 MySQL 好，因此可以尽情使用联表了</p> <h3 id="union-联表"><a href="#union-联表" class="header-anchor">#</a> UNION 联表</h3> <p>用于将两个表的查询结果连接在一起，这里的连接不是联表的连接，而是纵向的连接，将两个查询结果合起来返回给用户</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span>
<span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>

<span class="token keyword">UNION</span>

<span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span>
<span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>请注意，UNION 内部的每个 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每个 SELECT 语句中的列的顺序必须相同</p> <p>这个功能还是很好用的，比如可以同时使用多种查询条件选择出数据</p> <p>UNION ALL 操作符可以连接两个有重复行的 SELECT 语句，默认地，UNION 操作符选取不同的值。如果允许重复的值，请使用 UNION ALL。</p> <p>UINON ALL 子句基础语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span>
<span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>

<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>

<span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span>
<span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="强制转换"><a href="#强制转换" class="header-anchor">#</a> :: 强制转换</h3> <p>使用两个冒号来表示强制类型转换，下面的 sql，虽然 user_id 是 int 类型，不过查询出来的是 char 类型数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> user_id::<span class="token keyword">char</span>
            <span class="token keyword">from</span> <span class="token keyword">user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="正则匹配"><a href="#正则匹配" class="header-anchor">#</a> 正则匹配</h3> <p>pg 在使用正则表达式的时候需要使用关键字~，表示关键字之前的内容要和之后的内容进行匹配，不匹配则在关键字之前加！可以直接使用飘号进行首字符匹配</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> user_name <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> user_name <span class="token operator">~</span> <span class="token string">'timo'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="on-conflict"><a href="#on-conflict" class="header-anchor">#</a> ON CONFLICT</h3> <p>该语句用于实现当记录不存在时，执行插入；否则，进行更新这种操作</p> <p>在关系数据库中，术语 upsert 被称为合并(merge)。意思是，当执行 INSERT 操作时，如果数据表中不存在对应的记录，PostgreSQL 执行插入操作；如果数据表中存在对应的记录，则执行更新操作。这就是将其称为 upsert（update or insert）的原因</p> <p>模板</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name<span class="token punctuation">(</span>column_list<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>value_list<span class="token punctuation">)</span>
<span class="token keyword">ON</span> CONFLICT target <span class="token keyword">action</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>target 可以是：</p> <ul><li>(column_name)：一个或者一些字段名，左右两边加上小括号</li> <li>WHERE predicate：带谓语的 WHERE 子句</li></ul> <p>action 可以是：</p> <ul><li>DO NOTHING：当记录存在时，什么都不做</li> <li>DO UPDATE SET column_1 = value_1, … WHERE condition：当记录存在时，更新表中的一些字段</li></ul> <p>以下例子表示，向表 customers 中插入数据，如果插入的 name 存在，则更改 email 的值</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> customers <span class="token punctuation">(</span>name<span class="token punctuation">,</span> email<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
 <span class="token punctuation">(</span>
 <span class="token string">'Microsoft'</span><span class="token punctuation">,</span>
 <span class="token string">'hotline@microsoft.com'</span>
 <span class="token punctuation">)</span> 
<span class="token keyword">ON</span> CONFLICT <span class="token punctuation">(</span>name<span class="token punctuation">)</span> 
<span class="token keyword">DO</span>
 <span class="token keyword">UPDATE</span>
   <span class="token keyword">SET</span> email <span class="token operator">=</span> EXCLUDED<span class="token punctuation">.</span>email<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>该语法有以下几个要点：</p> <p>1，支持在括号中使用多个属性，以下查询需要对 col1 和 col2 共同使用唯一索引，这样的索引不能保证 col1 和 col2 分别唯一</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token constant">INSERT</span> <span class="token constant">INTO</span> dupes <span class="token function">VALUES</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token char">'c'</span><span class="token punctuation">)</span>
<span class="token class-name">ON</span> <span class="token constant">CONFLICT</span> <span class="token punctuation">(</span>col1<span class="token punctuation">,</span>col2<span class="token punctuation">)</span> <span class="token constant">DO</span> <span class="token constant">UPDATE</span> <span class="token class-name">SET</span> col3 <span class="token operator">=</span> <span class="token char">'c'</span><span class="token punctuation">,</span> col2 <span class="token operator">=</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2，excluded 的使用，我们可以看到上面的语句使用起来非常不方便，已经输入了数据还要再输入一遍，同时，如果是执行批量插入的语句的话基本上无法使用 conflict 了。因此提供了 excluded 来获取对应行的对应值</p> <p>3，向表中更新新值是使用 excluded，但是我们在某种情况下还需要获取原来的数据做操作，此时我们应该这么写</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> weather2 <span class="token keyword">as</span> tos <span class="token punctuation">(</span>city<span class="token punctuation">,</span>temp_lo<span class="token punctuation">,</span><span class="token keyword">date</span><span class="token punctuation">)</span> <span class="token keyword">SELECT</span> p<span class="token punctuation">,</span>q<span class="token punctuation">,</span>s::<span class="token keyword">date</span>
<span class="token keyword">FROM</span> <span class="token keyword">ROWS</span> <span class="token keyword">FROM</span>
    <span class="token punctuation">(</span>
		json_to_recordset<span class="token punctuation">(</span><span class="token string">'[{&quot;a&quot;:40,&quot;b&quot;:&quot;sh&quot;},{&quot;a&quot;:&quot;100&quot;,&quot;b&quot;:&quot;qd&quot;},{&quot;a&quot;:&quot;10&quot;,&quot;b&quot;:&quot;qdd&quot;},{&quot;a&quot;:&quot;3&quot;,&quot;b&quot;:&quot;bj&quot;}]'</span><span class="token punctuation">)</span>
            <span class="token keyword">AS</span> <span class="token punctuation">(</span>b <span class="token keyword">TEXT</span><span class="token punctuation">,</span>a <span class="token keyword">INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        generate_series<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		generate_series<span class="token punctuation">(</span><span class="token string">'2022-08-06'</span>::<span class="token keyword">date</span><span class="token punctuation">,</span><span class="token string">'2022-08-09'</span>::<span class="token keyword">date</span><span class="token punctuation">,</span><span class="token string">'1 day'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token keyword">AS</span> x <span class="token punctuation">(</span>p<span class="token punctuation">,</span>q<span class="token punctuation">,</span>r<span class="token punctuation">,</span>s<span class="token punctuation">)</span>
<span class="token comment">-- ORDER BY p</span>
<span class="token comment">-- on conflict(date, city) do update set temp_lo = excluded.temp_lo; --保留当前要新插入的值</span>
<span class="token comment">-- on conflict(date, city) do update set temp_lo = tos.temp_lo; --保留原始值</span>
<span class="token comment">-- on conflict(date, city) do nothing; --保留原始值</span>
<span class="token keyword">on</span> conflict<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">,</span> city<span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token keyword">update</span> <span class="token keyword">set</span> temp_lo <span class="token operator">=</span> tos<span class="token punctuation">.</span>temp_lo<span class="token operator">+</span>excluded<span class="token punctuation">.</span>temp_lo<span class="token punctuation">;</span> <span class="token comment">-- 原始值与当前值相加</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>这里额外说明一下 CONFLICT 的性能，ON CONFLICT 需要检查唯一约束或索引来确定冲突，冲突解决过程可能需要获取行锁</p> <h3 id="建立索引"><a href="#建立索引" class="header-anchor">#</a> 建立索引</h3> <p>建立索引时并行建立，不会影响数据库查询</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">index</span> concurrently <span class="token keyword">on</span> user_info <span class="token punctuation">(</span>user_name<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用 xx 索引</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">index</span> concurrently <span class="token keyword">on</span> user_info <span class="token keyword">using</span> gin <span class="token punctuation">(</span>user_name<span class="token punctuation">)</span>
<span class="token keyword">create</span> <span class="token keyword">index</span> concurrently <span class="token keyword">on</span> user_info <span class="token keyword">using</span> <span class="token keyword">hash</span> <span class="token punctuation">(</span>user_name<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>启动 gin 模块（gin 一般用于数组）</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> extension <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> btree_gin<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="gin-索引原理"><a href="#gin-索引原理" class="header-anchor">#</a> gin 索引原理</h3> <p>GIN 是 Generalized Inverted Index 的缩写。就是所谓的<strong>倒排索引</strong>，它用于处理类似数组、ltree 等字段。它处理的数据类型的值不是原子的，而是由元素构成。我们称之为复合类型。如(‘hank’, ‘15:3 21:4’)中，表示hank在15:3和21:4这两个位置出现过</p> <p>GIN 的主要应用领域是加速全文搜索，所以，这里我们使用全文搜索的例子介绍一下GIN索引。如下，建一张表：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>postgres=## create table ts(doc text, doc_tsv tsvector);

postgres=## insert into ts(doc) values
  ('Can a sheet slitter slit sheets?'), 
  ('How many sheets could a sheet slitter slit?'),
  ('I slit a sheet, a sheet I slit.'),
  ('Upon a slitted sheet I sit.'), 
  ('Whoever slit the sheets is a good sheet slitter.'), 
  ('I am a sheet slitter.'),
  ('I slit sheets.'),
  ('I am the sleekest sheet slitter that ever slit sheets.'),
  ('She slits the sheet she sits on.');

postgres=## create index on ts using gin(doc_tsv);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>该 GIN 索引结构如下，黑色方块是 TID 编号，比如0-2代表该单词在第0行的第2个元素中出现过，白色为单词
<img src="https://i-blog.csdnimg.cn/blog_migrate/2a82350a9a28c09fdb259fa340158558.png" alt="在这里插入图片描述"></p> <p>由上可见，sheet、slit、slitter 出现在多行之中，会有多个 TID，这样就会生成一个 TID 列表，并为之生成一棵单独的B-tree，以此增加搜索速度</p> <p>总结来说，gin 就是将数组字段中的每一个元素都取出来，对每个元素都建立一个 b+ 索引。而索引最终存放的值也是一个 b+ 树，这个 b+ 树存放的是该元素出现的行以及编号</p> <h3 id="pg-stat-activity-查询正在执行的语句和杀掉卡住的语句"><a href="#pg-stat-activity-查询正在执行的语句和杀掉卡住的语句" class="header-anchor">#</a> pg_stat_activity 查询正在执行的语句和杀掉卡住的语句</h3> <p>有些更新语句非常耗时间卡住了其他的 sql 执行，我们可以通过以下语句查询正在执行的语句并且查询是否有 lock 的语句</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> pg_blocking_pids<span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">,</span> pid<span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> xact_start<span class="token punctuation">,</span> wait_event<span class="token punctuation">,</span> wait_event_type<span class="token punctuation">,</span> substr<span class="token punctuation">(</span>query<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> pg_stat_activity
<span class="token keyword">where</span> state <span class="token operator">&lt;&gt;</span> <span class="token string">'idle'</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token number">3</span> <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>order by 3 代表按第三列排序。我们查出 pid 后可以杀掉 pid</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> pg_terminate_backend<span class="token punctuation">(</span><span class="token number">21829</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="设置东8区"><a href="#设置东8区" class="header-anchor">#</a> 设置东8区</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">set</span> <span class="token keyword">time</span> zone <span class="token string">'PRC'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="常见函数"><a href="#常见函数" class="header-anchor">#</a> 常见函数</h2> <h3 id="to-char-日期转字符串"><a href="#to-char-日期转字符串" class="header-anchor">#</a> to_char 日期转字符串</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>to_char<span class="token punctuation">(</span>cjsj<span class="token punctuation">,</span> <span class="token string">'yyyy-mm-dd hh24:MI:SS'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="to-timestamp-字符串转日期"><a href="#to-timestamp-字符串转日期" class="header-anchor">#</a> to_timestamp 字符串转日期</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>to_timestamp<span class="token punctuation">(</span>cjsj<span class="token punctuation">,</span> <span class="token string">'yyyy-mm-dd hh24:MI:SS'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="date-part"><a href="#date-part" class="header-anchor">#</a> date_part</h3> <p>date_part('day', TIMESTAMP '2018-03-01 08：00：00') 结果是 1，如果用 hour 就可以求出小时数为 8</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> date_part<span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">,</span> biztime<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>qty<span class="token punctuation">)</span> <span class="token keyword">from</span> datatable <span class="token keyword">where</span> date_part<span class="token punctuation">(</span><span class="token string">'day'</span><span class="token punctuation">,</span>biztime<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="extract-epoch-year-from-timestamp"><a href="#extract-epoch-year-from-timestamp" class="header-anchor">#</a> extract (epoch | year... from timestamp)</h3> <p>extract 用来提取时间类型的某个数据，比如年月日时分秒，以及从 linux 数据戳开始到现在的 long 类型时间</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> extract<span class="token punctuation">(</span>epoch <span class="token keyword">from</span> <span class="token string">'2023-03-03'</span>::<span class="token keyword">timestamp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> extract<span class="token punctuation">(</span><span class="token keyword">month</span> <span class="token keyword">from</span> <span class="token string">'2023-03-03'</span>::<span class="token keyword">timestamp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="string-agg"><a href="#string-agg" class="header-anchor">#</a> string_agg</h3> <p>该函数用于将多个数据链接在一起成为一个字符串</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> string_agg<span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token string">'|'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> wechat_kf_info <span class="token keyword">group</span> <span class="token keyword">by</span> open_kfid<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们还可以让里面的数据按顺序排序</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> string_agg<span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token string">'|'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> id<span class="token punctuation">)</span> <span class="token keyword">from</span> wechat_kf_info <span class="token keyword">group</span> <span class="token keyword">by</span> open_kfid<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="json-与-jsonb"><a href="#json-与-jsonb" class="header-anchor">#</a> JSON 与 JSONB</h2> <p>pg 有很多自己的数据结构，比如 json。json 数据类型可以用来存储 JSON（JavaScript Object Notation）数据， 这样的数据也可以存储为 text，但是 json 数据类型更有利于检查每个存储的数值是可用的 JSON 值</p> <p>一个 JSON 数值可以是一个简单值（数字、字符串、true/null/false），数组，对象</p> <p>JSON 和 <strong>JSONB</strong> 类型在使用上几乎完全一致，两者的区别主要在存储上，json数据类型直接存储输入文本的完全的拷贝，JSONB 数据类型以二进制格式进行存储。同时 JSONB 相较于 JSON 更高效，处理速度提升非常大，且支持索引</p> <h3 id="查询操作符"><a href="#查询操作符" class="header-anchor">#</a> 查询操作符</h3> <p>我们可以对 JSON 类型做一些很有趣的操作，比如可以用箭头来取 json 中的值，比如 user 有很 home，我们可以直接查询他在北京的房子：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> user_home <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'beijing'</span> <span class="token keyword">as</span> aaa
<span class="token keyword">from</span> <span class="token keyword">user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="通过-json-的键获取-json-的值"><a href="#通过-json-的键获取-json-的值" class="header-anchor">#</a> 通过 json 的键获取 json 的值</h4> <p><strong>如果将 -&gt; 指向一个数字的话，就是对 json 数组的操作了</strong>，表示取第几个元素，比如以下代码，就是取第1个 json 元素</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> user_home <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token keyword">as</span> aaa
<span class="token keyword">from</span> <span class="token keyword">user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>除此之外，箭头还有可以有变种，<strong>-&gt;&gt; 表示取对应值文本的形式</strong>，可以理解为用-&gt;&gt;取出来的值，都是字符串。最直观的感受就是，在 idea 中分别用-&gt;与-&gt;&gt;取数据，取出来的分别是彩色与白色</p> <p>注意，-&gt;拿的只是 json 对象的域，因此有很多操作符不能用，如果像 map 一样只取对象的值的话，还是尽量使用 -&gt;&gt;</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> user_home <span class="token operator">-</span><span class="token operator">&gt;&gt;</span> <span class="token string">'beijing'</span> <span class="token keyword">as</span> aaa
<span class="token keyword">from</span> <span class="token keyword">user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="获取指定路径上的对象"><a href="#获取指定路径上的对象" class="header-anchor">#</a> #&gt; 获取指定路径上的对象</h4> <p>一个 json 数据可能会包含多个嵌套属性，<strong>使用 #&gt; 获得在指定路径上的 JSON 对象</strong>，同样，该操作符有变种 #&gt;&gt;</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> user_home <span class="token comment">#&gt;&gt; '{beijing, 汤臣一品}' as aaa</span>
<span class="token keyword">from</span> <span class="token keyword">user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="判断-json-中是否存在某个键"><a href="#判断-json-中是否存在某个键" class="header-anchor">#</a> ？判断 json 中是否存在某个键</h4> <p>用户在使用 JSON 类型时，常见的一些 JSON 搜索比如，JSON 中是否存在某个 KEY，某些 KEY，某些 KEY 的任意一个，这些操作 pg 都为我们提供了</p> <p>存在某个 KEY</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_table <span class="token keyword">where</span> colmn ? <span class="token string">'key'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>用 ?&amp; 表示必须存在所有 KEY，才会返回 true</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token string">'{&quot;a&quot;:1, &quot;b&quot;:2, &quot;c&quot;:3}'</span>::jsonb ?<span class="token operator">&amp;</span> array<span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>存在任意 KEY 元素</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token string">'[&quot;a&quot;, &quot;b&quot;]'</span>::jsonb ?<span class="token operator">|</span> array<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="判断-json-中是否存在某个键值对"><a href="#判断-json-中是否存在某个键值对" class="header-anchor">#</a> @&gt; 判断 json 中是否存在某个键值对</h4> <p>JSON 中是否存在指定的 key:value 对（支持嵌套 JSON）</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token string">'{&quot;a&quot;:1, &quot;b&quot;:2}'</span>::jsonb @<span class="token operator">&gt;</span> <span class="token string">'{&quot;b&quot;:2}'</span>::jsonb  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>JSON 中某个路径下的 VALUE（数组）中，是否包含指定的所有元素</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> jsonb <span class="token string">'{&quot;a&quot;:1, &quot;b&quot;: {&quot;c&quot;:[1,2,3], &quot;d&quot;:[&quot;k&quot;,&quot;y&quot;,&quot;z&quot;]}, &quot;d&quot;:&quot;kbc&quot;}'</span> @<span class="token operator">&gt;</span> <span class="token string">'{&quot;b&quot;:{&quot;c&quot;:[2,3]}}'</span><span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="修改操作符"><a href="#修改操作符" class="header-anchor">#</a> 修改操作符</h3> <p>向某个 json 类型的列塞入数据，需要使用单引号配合大括号</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> users <span class="token keyword">set</span> <span class="token keyword">data</span> <span class="token operator">=</span> <span class="token string">'{&quot;uptate_data&quot;: &quot;7&quot;}'</span>::jsonb <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>对一个 json 类型的数据增加某个字段或者修改某个字段，需要使用 ||</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> users <span class="token keyword">set</span> <span class="token keyword">data</span> <span class="token operator">=</span> <span class="token keyword">data</span>::jsonb <span class="token operator">||</span> <span class="token string">'{&quot;uptate_minute&quot;: &quot;10&quot;}'</span>::jsonb <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <p>pg 还提供了很多函数用来对对应的数据类型做操作，函数的传入应该是查询后的结果，但是函数会允许下面格式的查询语句</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> jsonb_array_elements<span class="token punctuation">(</span><span class="token string">'[1, 2, [3, 4]]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> jsonb_array_elements<span class="token punctuation">(</span>user_house<span class="token punctuation">)</span>
<span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="jsonb-array-elements-操作-json-数组"><a href="#jsonb-array-elements-操作-json-数组" class="header-anchor">#</a> jsonb_array_elements 操作 json 数组</h4> <p>比如你其实可以传入一个 json 类型的数组作为一个列，但是此时你就不能使用箭头来对数组中的每个元素进行同样的操作了。注意是一个，不是一群，需要严格限制个数，不然会报错。同时，该函数还允许传入 null</p> <p>此时你可以使用 jsonb_array_elements 函数，将顶层 JSON 数组扩展为一个 JSONB 值的集合，然后使用箭头来查询它们里面包含的值，即解析 JSON 数组转成多行</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> jsonb_array_elements<span class="token punctuation">(</span>user_house<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'home'</span>
<span class="token keyword">from</span> <span class="token keyword">user</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://i-blog.csdnimg.cn/blog_migrate/1246b10d3bc7f131657b9084c54e90a3.png" alt="在这里插入图片描述"></p> <p>更多的函数：
https://www.sjkjc.com/postgresql-ref/jsonb_array_elements/</p> <h2 id="hstore"><a href="#hstore" class="header-anchor">#</a> hstore</h2> <p>pg 可以使用 hstore 来储存一个类似 map 的结构，在数据库中，对应关系会使用 =&gt;  来表示，对该类型数据的增删改查有不同的方式</p> <p>hstore 模块实现了将键/值对存储到单个值的 hstore 数据类型。注意，hstore 中的 键 和 值 都只能是字符串</p> <p>我们可以使用 :: 强制类型转换一些数据为 hstore 类型</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>	<span class="token string">'a=&gt;x, b=&gt;y'</span>::hstore <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'a'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>并且在 hstore 中有一个特别奇怪的关键字 ARRAY，可以将零散的数据封装成数组来进行批量操作（一般来说像这种的都是函数）</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>	<span class="token string">'a=&gt;x, b=&gt;y, c=&gt;z'</span>::hstore <span class="token operator">-</span><span class="token operator">&gt;</span> ARRAY<span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果键没有对应的值，hstore 的特性还可以让它拿到 null，而不是丢出异常</p> <h3 id="操作符"><a href="#操作符" class="header-anchor">#</a> 操作符</h3> <p>hstore 的操作符可以使用不同方式查询该数据，比如使用键来寻找值（箭头）、判断对应的键是否在 hstore 中（问号）、左操作符是否包含右操作符（@&gt;）</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">// 获得键的值(如果不存在为NULL)	</span>
<span class="token string">'a=&gt;x, b=&gt;y'</span>::hstore <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'a'</span>

<span class="token comment">// hstore 包含键吗?	</span>
<span class="token string">'a=&gt;1'</span>::hstore ? <span class="token string">'a'</span>
<span class="token comment">// hstore 包含所有指定的键?	</span>
<span class="token string">'a=&gt;1,b=&gt;2'</span>::hstore ?<span class="token operator">&amp;</span> ARRAY<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span>
<span class="token comment">// hstore 包含任何指定的键?	</span>
<span class="token string">'a=&gt;1,b=&gt;2'</span>::hstore ?<span class="token operator">|</span> ARRAY<span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span>

<span class="token comment">// 左操作符包含右操作符?	</span>
<span class="token string">'a=&gt;b, b=&gt;1, c=&gt;NULL'</span>::hstore @<span class="token operator">&gt;</span> <span class="token string">'b=&gt;1'</span>
<span class="token comment">// 左操作符包含于右操作符?	</span>
<span class="token string">'a=&gt;c'</span>::hstore <span class="token operator">&lt;</span>@ <span class="token string">'a=&gt;b, b=&gt;1, c=&gt;NULL'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="增删改"><a href="#增删改" class="header-anchor">#</a> 增删改</h3> <p>操作符配合 ARRAY 函数即可实现大多数的 hstore 属性查询功能了，但是我们还是不知道如何将数据插入 hstore 中，以及如何创建一个 hstore 属性等问题</p> <p>首先我们启用 hstore 模块，使用 HSTORE 数据类型之前，需要先启用 hstore 模块：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> EXTENSION hstore<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建包含 HSTORE 数据类型的表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> books <span class="token punctuation">(</span>
 id <span class="token keyword">serial</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
 title <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 attr hstore
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>hstore 的增加操作</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> books <span class="token punctuation">(</span>title<span class="token punctuation">,</span> attr<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span>
 <span class="token punctuation">(</span>
 <span class="token string">'PostgreSQL 轻松学'</span><span class="token punctuation">,</span>
 <span class="token string">'&quot;paperback&quot; =&gt; &quot;685&quot;,
    &quot;publisher&quot; =&gt; &quot;sjk66.com&quot;,
    &quot;language&quot;  =&gt; &quot;简体中文&quot;,
    &quot;ISBN-13&quot;   =&gt; &quot;1234567890123&quot;,
 &quot;weight&quot;    =&gt; &quot;412 克&quot;'</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>给已存在的数据添加键值对，也就是向 hstore 中增加数据。注意，|| 是语法规则，不是或的意思，你不能改成 &amp;&amp;</p> <p>同时，想要在键值对之外加单引号，单引号里面想要箭头以及双引号，后面的转化符也是必须的</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> books
<span class="token keyword">SET</span> attr <span class="token operator">=</span> attr <span class="token operator">||</span> <span class="token string">'&quot;freeshipping&quot;=&gt;&quot;yes&quot;'</span> :: hstore<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在 mybatis 中，可以这么写</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>        update order_info
        set extra_info = extra_info || concat(#{key}, ' =&gt; ', #{value})::hstore
        where order_no = #{orderNo}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>删除键值对</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> books 
<span class="token keyword">SET</span> attr <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> <span class="token string">'freeshipping'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>也可以这样删除数据（减号）</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">// 从左操作符中删除键	</span>
<span class="token string">'a=&gt;1, b=&gt;2, c=&gt;3'</span>::hstore <span class="token operator">-</span> <span class="token string">'b'</span>::<span class="token keyword">text</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h2> <p>pg 支持数组类型数据结构，可以在一些数据类型后面加上中括号来表示数组这个结构，比如 integer[]</p> <p>对于数组的增删改查与上面的 hstore 与 json 差不多</p> <h3 id="操作符-2"><a href="#操作符-2" class="header-anchor">#</a> 操作符</h3> <p>默认情况下，数组的下标是从 1 开始的，我们也可以指定下标的开始值，如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> id<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> id<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token keyword">FROM</span> test02<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>但是我们一般都不会这么用，pg 给我们提供了很多操作数组的访问符</p> <table><thead><tr><th>操作符</th> <th>描述</th> <th>示例</th> <th>结果</th></tr></thead> <tbody><tr><td>=</td> <td>相等</td> <td>SELECT ARRAY[1.1,2.1,3.1]::int[] = ARRAY[1,2,3];</td> <td>t</td></tr> <tr><td>&lt;&gt;</td> <td>不等于</td> <td>select ARRAY[1,2,3] &lt;&gt; ARRAY[1,2,4];</td> <td>t</td></tr> <tr><td>&lt;</td> <td>小于</td> <td>select ARRAY[1,2,3] &lt; ARRAY[1,2,4]（pg 的大于小于等比较是按数组的顺序一一比较）;</td> <td>t</td></tr> <tr><td>&gt;</td> <td>大于</td> <td>select ARRAY[1,4,3] &gt; ARRAY[1,2,4];</td> <td>t</td></tr> <tr><td>&lt;=</td> <td>小于或等于</td> <td>select ARRAY[1,2,3] &lt;= ARRAY[1,2,3];</td> <td>t</td></tr> <tr><td>&gt;=</td> <td>大于或等于</td> <td>select ARRAY[1,4,3] &gt;= ARRAY[1,4,3];</td> <td>t</td></tr> <tr><td>@&gt;</td> <td>包含</td> <td>select ARRAY[1,4,3] @&gt; ARRAY[3,1];</td> <td>t</td></tr> <tr><td>&lt;@</td> <td>包含于</td> <td>select ARRAY[2,7] &lt;@ ARRAY[1,7,4,2,6];</td> <td>t</td></tr> <tr><td>&amp;&amp;</td> <td>重叠（是否有相同元素）</td> <td>select ARRAY[1,4,3] &amp;&amp; ARRAY[2,1];</td> <td>t</td></tr></tbody></table> <h3 id="函数-2"><a href="#函数-2" class="header-anchor">#</a> 函数</h3> <p>可以使用 sql 的 ARRAY 函数来将一系列数据变成函数，后面的 ::integer[] 强制转换为数组其实没有必要，但是还是推荐加上，这是为了规定类型</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> my_table <span class="token keyword">set</span> department_id <span class="token operator">=</span> ARRAY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>::<span class="token keyword">integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>向数组中添加新元素则需要这么处理</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 向一个数组的末端追加一个元素</span>
<span class="token keyword">select</span> array_append<span class="token punctuation">(</span>ARRAY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 连接两个数组</span>
<span class="token keyword">select</span> array_cat<span class="token punctuation">(</span>ARRAY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ARRAY<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">-- 向一个数组的首部追加一个元素</span>
<span class="token keyword">select</span> array_prepend<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> ARRAY<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>array_to_string</strong> 可以把数组变成字符串。比如在需要将数组中的某个值与某个字符串做模糊匹配的时候，这个函数就可以派上用场</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 数组转换字符串，用逗号分隔，null直接省略</span>
<span class="token keyword">select</span> array_to_string<span class="token punctuation">(</span>ARRAY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
<span class="token comment">-- null用*代替</span>
<span class="token keyword">select</span> array_to_string<span class="token punctuation">(</span>ARRAY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>string_to_array</strong> 也可以把字符串变成数组</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 用,分隔</span>
<span class="token keyword">select</span> string_to_array<span class="token punctuation">(</span><span class="token string">'a,b,c'</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">)</span>
<span class="token keyword">select</span> string_to_array<span class="token punctuation">(</span><span class="token string">'xx~^~yy~^~zz'</span><span class="token punctuation">,</span> <span class="token string">'~^~'</span><span class="token punctuation">,</span> <span class="token string">'yy'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>unnest</strong> 可以将一个数组扩展成一组行，这个函数非常重要，可以将一个数组拆成多条数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> unnest<span class="token punctuation">(</span>ARRAY<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>判断一个数据是否为空数组，<strong>array_length</strong>() 需要两个参数，第二个是数组的维度，下面的查询将不包括空数组和 NULL</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>array_length<span class="token punctuation">(</span>id_clients<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>array_agg 用于将多行数据合并成一个 数组</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> array_agg<span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">from</span> wechat_kf_info <span class="token keyword">group</span> <span class="token keyword">by</span> open_kfid<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用 <strong>any</strong> 函数做某个数据是否与任意一个数组中的数字相同的判断，但是一般尽量不要使用函数作为查询条件，因为用不了索引，使用强转配合关键字查询更加快速</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token string">'a'</span> <span class="token operator">=</span> <span class="token keyword">any</span><span class="token punctuation">(</span><span class="token string">'{a, b, c}'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="ltree"><a href="#ltree" class="header-anchor">#</a> ltree</h2> <h3 id="查询操作符-2"><a href="#查询操作符-2" class="header-anchor">#</a> 查询操作符</h3> <p>ltree 提供两种数据类型</p> <ul><li>ltree：存储标签路径</li> <li>lquery：表示用于匹配 ltree 值的类似正则表达式的模式。 一个简单的单词与路径中的标签匹配。 星号（*）匹配零个或多个标签。 例如：</li></ul> <p>foo 匹配确切的标签路径 foo
<em>.foo.</em> 匹配包含标签 foo 的任何标签路径
*.foo 匹配最后一个标签为 foo 的任何标签路径</p> <p>比如：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 匹配 sms.aaa</span>
<span class="token keyword">SELECT</span> v <span class="token keyword">FROM</span> configuration <span class="token keyword">WHERE</span> k <span class="token operator">~</span> lquery <span class="token string">'sms.*'</span><span class="token punctuation">;</span>
<span class="token comment">-- 匹配 sms</span>
<span class="token keyword">SELECT</span> v <span class="token keyword">FROM</span> configuration <span class="token keyword">WHERE</span> k <span class="token operator">~</span> lquery <span class="token string">'sms'</span><span class="token punctuation">;</span>
<span class="token comment">-- 匹配 aaa.sms.aaa</span>
<span class="token keyword">SELECT</span> v <span class="token keyword">FROM</span> configuration <span class="token keyword">WHERE</span> k <span class="token operator">~</span> lquery <span class="token string">'*.sms.*'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="性能分析"><a href="#性能分析" class="header-anchor">#</a> 性能分析</h2> <h3 id="generate-series-生成数据"><a href="#generate-series-生成数据" class="header-anchor">#</a> generate_series 生成数据</h3> <p>该函数一般用于我们向 pg 插入大量的数据，该函数的作用是在给定间隔内生成一系列数字，一般用于测试性能。 序列值之间的间隔和步骤由用户定义，下面的 start 指定开始大小，stop 指定结束大小，默认按一增加，但是可以用 step 指定增加大小</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>GENERATE_SERIES <span class="token punctuation">(</span> <span class="token keyword">start</span><span class="token punctuation">,</span> stop <span class="token punctuation">[</span><span class="token punctuation">,</span> step <span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>比如下面的语句，会生成1到10</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">value</span>
<span class="token keyword">FROM</span> GENERATE_SERIES<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- value</span>
<span class="token comment">-- -----------</span>
<span class="token comment">-- 1</span>
<span class="token comment">-- 2</span>
<span class="token comment">-- 3</span>
<span class="token comment">-- 4</span>
<span class="token comment">-- 5</span>
<span class="token comment">-- 6</span>
<span class="token comment">-- 7</span>
<span class="token comment">-- 8</span>
<span class="token comment">-- 9</span>
<span class="token comment">-- 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>配合插入语句使用，可以快速生成多条数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> second_kill_batch <span class="token punctuation">(</span>id<span class="token punctuation">,</span> start_time<span class="token punctuation">,</span> end_time<span class="token punctuation">,</span> batch_name<span class="token punctuation">,</span> activity_flag<span class="token punctuation">)</span>
<span class="token keyword">select</span> generate_series<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">1050</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'测试千条性能'</span><span class="token punctuation">,</span> generate_series<span class="token punctuation">(</span><span class="token number">150</span><span class="token punctuation">,</span> <span class="token number">1150</span><span class="token punctuation">)</span>::<span class="token keyword">varchar</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="explain-analyze"><a href="#explain-analyze" class="header-anchor">#</a> explain analyze</h3> <p>使用 pg 提供的 explain analyze sql 语句进行性能分析，返回的数据意义如下：
<img src="https://i-blog.csdnimg.cn/blog_migrate/3a1de82512f94da1ca81c9c49f2542e1.png" alt="在这里插入图片描述"></p> <p>cost=0.00…234.00</p> <ul><li>第一个数字 0.00 表示启动的成本，返回第一行需要多少 cost 值</li> <li>第二个数字 234.00 表示返回所有数据的成本</li></ul> <p>cost 使用将操作量化的方式返回给我们执行该语句大致需要多少代价，cost 基于如下的一些规则计算出的数字（默认）：</p> <p>顺序扫描一个块，cost 的值为 1；随机扫描一个块，cost 的值为 4；处理一个数据行的 CPU 代价，cost 的值为 0.01；处理一个索引行的 CPU 代价，cost 的值为 0.005；每个操作的 CPU 代价为 0.0025</p> <p>rows=10000，表示会返回10000行</p> <p>width=74，表示每行平均宽度为74字节</p> <p>来个复杂的例子：
<img src="https://i-blog.csdnimg.cn/blog_migrate/b484fddefbb0264a904a21d74fea9937.png" alt="在这里插入图片描述"></p> <p>actual time=0.320..0.320，实际花费的时间</p> <p>loops=1，循环的次数
buffers：缓冲命中数
planning time: 0.124 ms，生成执行计划时间
execution time：0.353 ms，执行执行计划时间，运行这个最快的查询计划的时间</p> <p>关于生成执行计划与执行执行计划的具体区别如下：</p> <p>1，你用 SQL 编写一个查询，这是某种脚本，你试图告诉服务器你想从他那里得到什么
2，大多数情况下，服务器可以通过编写查询来收集您请求的数据。有一种称为查询规划器的机制发挥作用。它尝试找到执行查询的最快方式（计划）。它通过估计几种可能的方式（计划）的执行时间来做到这一点（查询优化）
3，服务器使用被认为是最快的计划运行查询
4，服务器返回输出</p> <p>EXPLAIN 命令打印该过程的说明。现在：</p> <ul><li>execution time 输出上的执行时间是服务器在步骤 3-4 上花费的时间</li> <li>planning time 规划输出时间是服务器仅在步骤 2 上花费的时间。我相信您将其视为时间规划器认为查询需要，但这可以称为计划执行时间或估计执行时间</li></ul></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/yf_blog/tags/?tag=PostgreSQL" title="标签">#PostgreSQL</a></div> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">1/17/2026, 2:51:21 AM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/yf_blog/pages/977f1d/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">PostgreSQL 更新数据时 HOT优化</div></a> <a href="/yf_blog/pages/d520d7/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Lombok 的常用注解</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/yf_blog/pages/977f1d/" class="prev">PostgreSQL 更新数据时 HOT优化</a></span> <span class="next"><a href="/yf_blog/pages/d520d7/">Lombok 的常用注解</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/yf_blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/yf_blog/pages/0141e5/"><div>
            关于分布式系统 RPC 中高可用功能的实现
            <!----></div></a> <span class="date">01-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/yf_blog/pages/3466b3/"><div>
            VuePress 博客搭建指南
            <!----></div></a> <span class="date">01-03</span></dt></dl><dl><dd>03</dd> <dt><a href="/yf_blog/pages/f290f0/"><div>
            Vercel 部署教程
            <!----></div></a> <span class="date">01-02</span></dt></dl> <dl><dd></dd> <dt><a href="/yf_blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/yf_blog/assets/js/app.c2664df0.js" defer></script><script src="/yf_blog/assets/js/3.86e8edc4.js" defer></script><script src="/yf_blog/assets/js/2.e5572c9a.js" defer></script><script src="/yf_blog/assets/js/187.0a545656.js" defer></script>
  </body>
</html>
